<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Locked In — Timer</title>
  <meta name="theme-color" content="#0f172a" />
  <link rel="stylesheet" href="timer.css" />
</head>
<body>
  <div class="app card">
    <header class="header">
      <div class="brand">
        <span class="dot"></span>
        <div>
          <h1>Locked In — Timer</h1>
          <p class="muted">Tap the big clock to toggle Focus Mode.</p>
        </div>

        <div id="headerLock" class="lock-anim intro run" aria-hidden="true">
          <svg class="lock-svg" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Lock visual">
            <defs>
              <radialGradient id="g" cx="50%" cy="50%" r="50%">
                <stop offset="0%" stop-color="rgba(179,136,255,0.35)"></stop>
                <stop offset="100%" stop-color="rgba(179,136,255,0)"></stop>
              </radialGradient>
            </defs>
            <circle class="glow" cx="60" cy="60" r="42" fill="url(#g)"></circle>
            <path class="shackle" d="M40 48 C40 30, 80 30, 80 48 L80 58" stroke-linecap="round"></path>
            <rect class="body" x="34" y="56" rx="10" ry="10" width="52" height="44"></rect>
            <g class="keyhole" transform="translate(60,78)">
              <circle r="5"></circle>
              <rect x="-2" y="5" width="4" height="10" rx="2"></rect>
            </g>
          </svg>
        </div>
      </div>
      <nav class="nav">
        <a id="historyLink" class="pill" href="#">History</a>
        <a id="toggleSound" class="pill" href="#">Sound: On</a>
        <span id="wakelockStatus" class="pill">Screen lock: off</span>
      </nav>
    </header>

    <section id="timerPage" class="grid">
      <section class="panel panel-primary">
        <div class="clock-shell" id="clockShell" aria-hidden="true">
          <div class="timer" id="timer" role="button" tabindex="0" aria-label="Tap to toggle Focus Mode">00:00:00</div>
        </div>

        <div class="phase-meta">
          <span class="phase-pill" id="phasePill">Focus</span>
          <div class="sub" id="phaseLabel">Phase: Focus</div>
        </div>

        <div class="progress" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
          <div id="bar" class="bar"></div>
        </div>

        <div class="controls">
          <button id="pauseResume" class="btn btn-ghost" disabled>Resume</button>
          <button id="endEarly" class="btn btn-ghost" disabled>End</button>
          <button id="reset" class="btn btn-ghost">Reset</button>
          <button id="emergencyBtn" class="btn btn-ghost">Emergency</button>
          <button id="focusModeBtn" class="btn">Focus Mode</button>
        </div>
      </section>

      <section class="panel panel-secondary">
        <div class="section-heading">
          <label class="label">Session overview</label>
          <p class="note">These details stay pinned while you focus.</p>
        </div>
        <div id="sessionInfo" class="session-info"></div>

        <div class="section-heading" style="margin-top:18px;">
          <label class="label">Recent sessions</label>
          <p class="note">Track your consistency over time.</p>
        </div>
        <div id="history" class="history"></div>

        <div class="actions">
          <a id="backToSetup" class="btn" href="#">↩ Back to Setup</a>
        </div>
      </section>
    </section>
  </div>

  <!-- PIN/Emergency sheet -->
  <div id="sheet" class="sheet" aria-hidden="true">
    <div class="sheet-inner" onclick="event.stopPropagation()">
      <span class="pill">Focus session</span>
      <h2 class="h2">Enter PIN to confirm</h2>
      <div class="emergency" id="emergencyLinks"></div>
      <input id="pinInput" type="password" inputmode="numeric" placeholder="Enter your PIN" class="pinbox" />
      <div class="keypad" id="keypad"></div>
      <button id="submitPin" class="btn">Confirm</button>
      <button id="cancelSheet" class="btn btn-ghost">Cancel</button>
    </div>
  </div>

  <!-- Minimal countdown overlay (Focus Mode) -->
  <div id="minimal" class="minimal" aria-hidden="true">
    <div id="minimalTimer" class="minimalTimer">00:00:00</div>
  </div>

  <!-- Quotes toast container -->
  <div id="toasts" class="toasts" aria-live="polite" aria-atomic="true"></div>

  <script src="alerts.js"></script>
  <script src="timer.js"></script>
</body>
</html>
