/* ===== Unified Theme + Design System ===== */
:root{
  --bg-primary:#0a0e1a;
  --bg-secondary:#141824;
  --bg-tertiary:#1a1f2e;
  --text-primary:#ffffff;
  --text-secondary:#b4b8c8;
  --text-muted:#6b7280;
  --accent-primary:#8b5cf6;
  --accent-secondary:#6366f1;
  --accent-glow:rgba(139,92,246,.4);
  --border:rgba(255,255,255,.08);
  --border-hover:rgba(255,255,255,.15);
  --shadow:0 20px 60px rgba(0,0,0,.4);
  --shadow-lg:0 30px 80px rgba(0,0,0,.5);
  
  /* Gradient backgrounds */
  --gradient-bg:radial-gradient(ellipse at top, rgba(139,92,246,.15) 0%, rgba(99,102,241,.1) 30%, transparent 70%),
                 linear-gradient(180deg, #0a0e1a 0%, #0f141f 40%, #141824 100%);
  --gradient-card:linear-gradient(135deg, rgba(20,24,36,.9) 0%, rgba(26,31,46,.85) 100%);
  --gradient-button:linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%);
  --gradient-button-hover:linear-gradient(135deg, #9d6af7 0%, #7477f2 100%);
  
  /* Legacy vars for compatibility */
  --bg1:var(--bg-primary);
  --bg2:var(--bg-secondary);
  --card:rgba(20,24,36,.9);
  --panel:rgba(26,31,46,.85);
  --text:var(--text-primary);
  --muted:var(--text-muted);
  --accent:var(--accent-primary);
  --ok:#4ade80;
  --bad:#f87171;
}

/* ===== Base + iOS input zoom fix ===== */
*{box-sizing:border-box}
html,body{height:100%}
html{-webkit-text-size-adjust:100%}
body{margin:0;font-size:16px}

/* ===== Page ===== */
body{
  background:var(--gradient-bg);
  color:var(--text-primary);
  font-family:"Inter",system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  display:block;
  padding:24px;
  -webkit-overflow-scrolling:touch;
  position:relative;
  overflow-x:hidden;
  min-height:100svh;
}

/* Animated background glow */
body::before{
  content:"";
  position:fixed;
  top:0;
  left:50%;
  transform:translateX(-50%);
  width:800px;
  height:800px;
  background:radial-gradient(circle, rgba(139,92,246,.2) 0%, transparent 70%);
  border-radius:50%;
  pointer-events:none;
  z-index:0;
  animation:pulse 8s ease-in-out infinite;
}

@keyframes pulse{
  0%,100%{opacity:.3;transform:translateX(-50%) scale(1);}
  50%{opacity:.5;transform:translateX(-50%) scale(1.1);}
}

/* Center the whole app on desktop */
.app{
  width:min(980px,100%);
  margin:0 auto;
  position:relative;
  z-index:1;
}

@media (min-width:960px){
  .app{
    min-height:calc(100vh - 64px);
    display:flex;
    flex-direction:column;
    justify-content:center;
  }
}

.card{
  background:var(--gradient-card);
  backdrop-filter:blur(20px);
  border:1px solid var(--border);
  border-radius:20px;
  padding:16px;
  box-shadow:var(--shadow-lg);
}

/* Sticky navbar (all screens) */
.header{
  position:sticky;
  top:calc(0px + env(safe-area-inset-top));
  z-index:20;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding:10px 12px;
  background:var(--gradient-card);
  backdrop-filter:blur(20px);
  border:1px solid var(--border);
  border-radius:14px;
  margin:0 0 16px 0;
  box-shadow:0 8px 24px rgba(0,0,0,.3);
}

.brand{
  display:flex;
  align-items:center;
  gap:10px;
}

.brand-text{
  font-size:1.1rem;
  font-weight:700;
  color:var(--text-primary);
}

.dot{
  width:10px;
  height:10px;
  border-radius:50%;
  background:var(--accent-primary);
  box-shadow:0 0 12px var(--accent-glow);
}

.pill{
  padding:6px 12px;
  border-radius:999px;
  border:1px solid var(--border);
  background:rgba(20,24,36,.6);
  color:var(--text-muted);
  text-decoration:none;
  font-size:.85rem;
  font-weight:600;
  transition:all .2s ease;
}

.pill:hover{
  background:rgba(139,92,246,.1);
  border-color:var(--border-hover);
  color:var(--text-primary);
  transform:translateY(-1px);
}

/* History list */
.history-list{
  display:grid;
  gap:12px;
  margin-top:16px;
}

.history-item{
  background:var(--gradient-card);
  backdrop-filter:blur(10px);
  border:1px solid var(--border);
  border-radius:16px;
  padding:16px;
  transition:all .2s ease;
}

.history-item:hover{
  border-color:var(--border-hover);
  box-shadow:0 4px 16px rgba(0,0,0,.3);
  transform:translateY(-2px);
}

.history-item__header{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:12px;
  margin-bottom:8px;
}

.history-item__title{
  font-size:1rem;
  font-weight:600;
  color:var(--text-primary);
  margin:0;
}

.history-item__date{
  font-size:.85rem;
  color:var(--text-muted);
  white-space:nowrap;
}

.history-item__meta{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  margin-top:8px;
}

.history-item__tag{
  padding:4px 10px;
  border-radius:6px;
  font-size:.75rem;
  font-weight:600;
  text-transform:uppercase;
  letter-spacing:.5px;
}

.history-item__tag--completed{
  background:rgba(74,222,128,.15);
  color:#4ade80;
  border:1px solid rgba(74,222,128,.3);
}

.history-item__tag--incomplete{
  background:rgba(248,113,113,.15);
  color:#f87171;
  border:1px solid rgba(248,113,113,.3);
}

.history-empty{
  text-align:center;
  padding:48px 24px;
  color:var(--text-muted);
  font-size:.95rem;
}

@media (prefers-reduced-motion:reduce){
  *,*::before,*::after{animation:none!important;transition:none!important;}
  body::before{animation:none!important;}
}
